(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(t,e,n){t.exports=n(21)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(6),o=n.n(c),r=(n(16),n(9)),s=n(1),m=n(2),l=n(4),p=n(3),u=n(7),d=n(5),h=(n(17),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{className:"message"},i.a.createElement("div",{className:"message-top"},i.a.createElement("span",{className:"client-name"},this.props.message.name),i.a.createElement("span",{className:"timestamp"},this.props.message.timestamp)),i.a.createElement("div",{className:"message-text"},this.props.message.text))}}]),e}(a.Component)),v=(n(18),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return i.a.createElement("div",{id:"init"},i.a.createElement("form",{onSubmit:this.props.participantSubmit},i.a.createElement("input",{type:"text",placeholder:"Enter name here...",id:"participant-form"})))}}]),e}(a.Component)),b=(n(19),n(20),null),f=function(t){function e(t){var n;return Object(s.a)(this,e),(n=Object(l.a)(this,Object(p.a)(e).call(this,t))).state={init:!0,participants:[],messages:[],name:""},n.participantSubmit=n.participantSubmit.bind(Object(u.a)(n)),n.textSubmit=n.textSubmit.bind(Object(u.a)(n)),n}return Object(d.a)(e,t),Object(m.a)(e,[{key:"participantSubmit",value:function(t){t.preventDefault();var e=document.getElementById("participant-form").value;if(""!==e){var n=document.location.host,a="".concat(document.location.protocol.replace("http","ws"),"//").concat(n,"/ws?name=").concat(e);(b=new WebSocket(a)).onopen=function(t){console.log("Opened socket")},b.onerror=function(t){console.log(t)},this.setState({init:!1,name:e,participants:[]})}}},{key:"textSubmit",value:function(t){t.preventDefault();var e=document.getElementById("text-entry-input").value;""!==e&&(b.send(JSON.stringify({text:e,name:this.state.name,timestamp:(new Date).toLocaleTimeString()})),document.getElementById("text-entry-input").value="")}},{key:"componentDidUpdate",value:function(){var t=this;this.state.init||(document.getElementById("conversation-main").scrollTop=document.getElementById("conversation-main").scrollHeight,console.log("componentDidUpdate"),b.onmessage=function(e){console.log(e);var n=JSON.parse(e.data);if(console.log(n),n.text){var a=n.text,i=n.name,c=n.timestamp;t.setState({messages:[].concat(Object(r.a)(t.state.messages),[{text:a,name:i,timestamp:c}])})}else t.setState({participants:n})})}},{key:"render",value:function(){return i.a.createElement("div",{id:"main"},i.a.createElement("div",{id:"title"},i.a.createElement("h1",null,"Chat Tool")),this.state.init&&i.a.createElement("div",{id:"box-init"},i.a.createElement(v,{participantSubmit:this.participantSubmit})),!this.state.init&&i.a.createElement("div",{id:"box-main"},i.a.createElement("div",{style:{width:"100%",height:"100%"}},i.a.createElement("div",{id:"top"},i.a.createElement("div",{id:"participants-main"},i.a.createElement("b",null,"Participants (".concat(this.state.participants.length,"):")),this.state.participants.map(function(t){return i.a.createElement("div",null,t)})),i.a.createElement("div",{id:"conversation-main"},this.state.messages.map(function(t){return i.a.createElement(h,{message:t})}))),i.a.createElement("div",{id:"bottom"},i.a.createElement("div",{id:"text-entry-main"},i.a.createElement("form",{onSubmit:this.textSubmit,id:"text-entry-form"},i.a.createElement("input",{type:"text",id:"text-entry-input"})))))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.53aeed38.chunk.js.map